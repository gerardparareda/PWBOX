{% extends "base.html.twig" %}
{% block title %} Shared Dashboard {% endblock %}
{% block styles %}
    <!-- Custom styles for this template -->
    <link href="fine-uploader/fine-uploader-new.css" rel="stylesheet">
    <link href="/assets/css/dashboard.css" rel="stylesheet">
{% endblock %}
{% block body %}
    <body>

    {% block header %}
        <header>
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <img src="/assets/img/ln.png" class="rounded float-left logo" alt="LateNight Group" width="50" height="50">
                <a class="navbar-brand" href="/dashboard">PWBOX</a>
                <ul class="navbar-nav">
                    <li class="nav-item active">
                        <a class="nav-link btn" href="/dashboard">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn" href="/notifications">Notifications</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link btn" href="/logout">Logout</a>
                    </li>
                </ul>

                <div class=" ml-auto p-2">
                    <a href="/profile"><img src="{{ user_avatar }}" class="rounded-circle" alt="Avatar" width="50" height="50"></a>
                </div>
            </nav>
        </header>
    {% endblock %}
    {% block content %}
        <table class="table table-hover">
            <tbody>
                <tr>
                    <td  ondblclick="alert('double clicked');">
                        <img src="/assets/img/folder.png" width="20" height="20">
                        <p>Carpeta 1</p>
                        <div class="actions float-right">
                            <a href = "#"><img src="/assets/img/rename-button.png" width="20" height="20" title="Rename Item" alt="Rename Item"></a>
                            <a href = "#"><img src="/assets/img/share-button.png" width="20" height="20" title="Share Item" alt="Share Item"></a>
                            <a href = "#"><img src="/assets/img/delete-button.png" width="20" height="20" title="Remove Item" alt="Remove Item"></a>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td  ondblclick="alert('double clicked');">
                        <img src="/assets/img/file.png" width="20" height="20">
                        <p>Arxiu 1</p>
                        <div class="actions float-right">
                            <a href = "#"><img src="/assets/img/rename-button.png" width="20" height="20" title="Rename Item" alt="Rename Item"></a>
                            <a href = "#"><img src="/assets/img/share-button.png" width="20" height="20" title="Share Item" alt="Share Item"></a>
                            <a href = "#"><img src="/assets/img/delete-button.png" width="20" height="20" title="Remove Item" alt="Remove Item"></a>
                        </div>
                    </td>
                </tr>
            </tbody>

            {% for carpeta in carpetes %}
                <tr>
                    {% if carpeta['esCarpeta'] == true %}
                        <td  ondblclick="goToURL('{{ carpeta['urlPath'] }}')">
                            <img src="/assets/img/folder.png" width="20" height="20">
                    {% else %}
                        <td  ondblclick="downloadFile('/file/{{ carpeta['urlPath'] }}')">
                            <img src="/assets/img/file.png" width="20" height="20">
                    {% endif %}

                        <p id = "{{ carpeta['id'] }}">{{ carpeta['nomCarpeta'] }}</p>

                        {% if carpeta['admin'] == 1 %}
                            <div class="actions float-right">
                                {% if carpeta['esCarpeta'] == true %}
                                    <a href = ""><img src="/assets/img/rename-button.png" width="20" height="20" title="Rename Item" alt="Rename Item" onclick="renameFolder({{ carpeta['id'] }}, '{{ carpeta['nomCarpeta'] }}')"></a>
                                    <a href = ""><img src="/assets/img/delete-button.png" width="20" height="20" title="Remove Item" alt="Remove Item" onclick="removeFolder({{ carpeta['id'] }})"></a>
                                    <a href = ""><img src="/assets/img/share-button.png" width="20" height="20" title="Share Item" alt="Share Item" onclick="shareFolder({{ carpeta['id'] }})"></a>
                                {% else %}
                                    <a href = ""><img src="/assets/img/rename-button.png" width="20" height="20" title="Rename Item" alt="Rename Item" onclick="renameFolder({{ carpeta['id'] }}, '{{ carpeta['nomCarpeta'] }}')"></a>
                                    <a href = ""><img src="/assets/img/delete-button.png" width="20" height="20" title="Remove Item" alt="Remove Item" onclick="removeFolder({{ carpeta['id'] }})"></a>
                                    <a href = ""><img src="/assets/img/share-button.png" width="20" height="20" title="Share Item" alt="Share Item" onclick="shareFolder({{ carpeta['id'] }})"></a>
                                    <a href = ""><img src="/assets/img/download-button.png" width="20" height="20" title="Download Item" alt="Download Item" onclick="downloadFolder({{ carpeta['id'] }})"></a>
                                {% endif %}
                            </div>
                        {% else %}
                            <div class="actions float-right">
                                <a href = ""><img src="/assets/img/download-button.png" width="20" height="20" title="Download Item" alt="Download Item" onclick="renameFolder({{ carpeta['id'] }})"></a>
                            </div>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </table>

    {% endblock %}
    {% block footer %}
    {% endblock %}

    {% block scripts %}
        {{ parent() }}
        <script src="/fine-uploader/fineuploader.js"></script>
        <script src="/fine-uploader/fineuploader.js"></script>
        <script src="/assets/js/jquery-3.3.1.min.js"></script>
        <script src="/assets/js/dashboard.js"></script>
    {% endblock %}

</body>
{% endblock %}